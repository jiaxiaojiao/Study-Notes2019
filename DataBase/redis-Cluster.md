# Redis 常见的集群技术

Redis3.0支持集群功能。


## Redis集群实现机制

Redis集群有三种实现机制：
1. 客户端分片
    - 业务程序端的程序代码根据预先设置的路由规则，直接对多个Redis实例进行分布式访问。
    - 好处： 不依赖于第三方中间件，性能好，实现方法和代码都自己控制，可随时调整。
    - 弊端： 静态分片技术，Redis实例的增减，都得手工调整分片程序。升级麻烦。可运维性能差。
2. 代理分片
    - 代理程序接收来自业务程序的数据请求，根据路由规则，将这些请求分发给正确的Redis实例 并返回给业务程序。
    - 依赖第三方代理程序，分布式中间件。
    - 好处： 业务程序不用关心后端的Redis实例，运维方便
    - 基于该机制的开源产品： Twemproxy
3. Redis Cluster 
    - 没有中心节点。
    - Redis Cluster 将所有 Key 映射到 16384 个 Slot 中，集群中每个 Redis 实例负责一部分，业务程序通过集成的 Redis Cluster 客户端进行操作。客户端可以向任一实例发出请求，如果所需数据不在该实例中，则该实例引导客户端自动去对应实例读写数据。
    - Redis Cluster 的成员管理（节点名称、IP、端口、状态、角色）等，都通过节点之间两两通讯，定期交换并更新。


## Twemproxy 

Twemproxy 是一种代理分片机制，由 Twitter 开源。Twemproxy 作为代理，可接受来自多个程序的访问，按照路由规则，转发给后台的各个 Redis 服务器，再原路返回。

这个方案顺理成章地解决了单个 Redis 实例承载能力的问题。当然，Twemproxy 本身也是单点，需要用 Keepalived 做高可用方案。

Twemproxy 是应用范围最广、稳定性最高、最久经考验的分布式中间件。

弊端： 

1. 无法平滑地扩容 / 缩容
2. 运维不友好，没有控制面板

## Codis
































