# TCP协议

## 三次握手建立连接

![image](images/TCP-1.png)

TCP协议，提供面向连接的可靠数据传输服务，采用三次握手过程建立连接。

第1次握手： 客户端想服务器发送SYN段（SYN=1），请求建立新连接。

第2次握手：服务器收到SYN段后，向客户端发送 SYNACK段 （SYN=1,ACK=1）进行确认，同意建立新连接。

第3次握手：客户端收到服务器的SYNACK段，向服务器发送ACK确认段（ACK=1），并确认连接建立成功。服务器收到ACK确认段后，也确认连接建立成功。 

## 四次挥手断开连接

![image](images/TCP-2.png)

TCP协议断开连接的四次挥手过程。

第1次挥手：客户端向服务器发送FIN段（FIN=1），请求释放连接，等待服务器确认。

第2次挥手：服务器向客户端发送ACK段（ACK=1）

第3次挥手：服务器向客户端发送FIN段（FIN=1），请求释放连接，等待客户确认。

第4次挥手：客户端向服务器发送ACK段，并等待2MSL时间后关闭连接，服务器收到该ACK后，马上关闭连接。
