# 接口

接口是抽象方法定义的集合（接口中也可以定义一些常量值），是一种特殊的抽象类。

接口中只包含方法的定义，没有方法的实现，所有方法都是抽象的

## 接口的幂等性
> 就是用户对于同一操作发起的一次请求或者多次请求的结果是一致的，不会因为多次点击而产生了副作用。

#### 1. 要做到幂等性，从接口设计上来说，不设计任何非幂等的操作。

比如需求是当用户点击赞同时，答案赞同数量加1。修改为：当用户点击赞同时，确保答案赞同表存在一条记录，用户、答案。赞同数量由答案赞同表统计出来。
#### 2、确定输入的唯一性是保证幂等的先决条件，把所有带有副作用的task 都给一个唯一值guid，最后写进数据库之前 检查一下这个guid是否已经执行过了。（调用者给消息一个唯一ID，接收者在执行之前通过ID检查是否已经执行。ID不同长时间存储，可以使用redis把ID作为一个有生命周期的锁）

Redis实现分布式锁。Redis中存在setNx，不存在就set值，返回1，存在就不set，返回0。

查询操作，Select是天然的幂等操作。
